#!/usr/bin/env ruby

require 'main'
require 'ramdev'
require 'etc'

#TODO: Override the rc file from the command line
#FIX: This is not windows compatible.
user = Etc.getlogin
rcfile = File.join(Dir.home(user), ".ramdevrc")

Main do
  mode 'up' do
    def run
      rd = RamDev.new
      rd.build(rcfile, 10485760) #10MB
    end
  end

  mode 'down' do
    def run
      rd = RamDev.new
      rd.unbuild(rcfile)
    end
  end

  def run()
    puts 'Usage: ramdev [up|down]'
    puts ''
    puts "\tup\tCreate a ramdisk, move and link working folders."
    puts "\tdown\tDeallocate ramdisk and restore all file paths."
  end
end
